import streamlit as st

st.set_page_config(page_title="MBTI 기반 진로 추천", page_icon="🧭", layout="centered")

st.title("MBTI 기반 진로 추천 🧭")
st.caption("참고용 도구입니다. 개인의 흥미·가치관·역량에 따라 달라질 수 있어요.")

# MBTI 데이터: 간단 성향 요약 + 직업 추천
MBTI_DATA = {
    "INTJ": {
        "summary": "전략적·분석적·장기계획 선호. 독립적으로 깊이 파고듦.",
        "jobs": [
            "전략 컨설턴트", "데이터 사이언티스트", "연구원(R&D)", "시스템 아키텍트",
            "프로덕트 매니저", "투자 분석가", "정책 분석가", "소프트웨어 엔지니어(백엔드)"
        ],
    },
    "INTP": {
        "summary": "논리·이론 탐구형. 아이디어 실험과 문제 구조화에 강점.",
        "jobs": [
            "연구원", "데이터 엔지니어", "알고리즘 개발자", "학계/연구자",
            "UX 리서처", "보안 분석가", "기술 작가", "머신러닝 엔지니어"
        ],
    },
    "ENTJ": {
        "summary": "목표 지향 리더형. 체계 설계와 실행관리 강함.",
        "jobs": [
            "경영 컨설턴트", "프로덕트 총괄(PM)", "영업 전략가", "사업 개발( BizDev )",
            "투자은행 애널리스트", "운영 매니저", "프로젝트 매니저", "창업가"
        ],
    },
    "ENTP": {
        "summary": "아이디어 발산·변화추진. 새로움과 도전을 즐김.",
        "jobs": [
            "창업가", "마케팅 전략가", "VC/스타트업 스카우트", "프로덕트 매니저",
            "광고 기획자(AE)", "크리에이터/방송", "혁신 컨설턴트", "기술 에반젤리스트"
        ],
    },
    "INFJ": {
        "summary": "가치지향·통찰형. 사람과 의미에 관심이 큼.",
        "jobs": [
            "상담사", "학교/임상 상담교사", "작가/에디터", "사회복지사",
            "비영리 기획자", "HRD 교육기획", "심리학 연구자", "UX 라이터"
        ],
    },
    "INFP": {
        "summary": "이상지향·창의표현. 진정성·가치 일치 중요.",
        "jobs": [
            "작가/소설가", "번역가", "일러스트레이터", "UX 디자이너",
            "콘텐츠 기획자", "아동복지사", "출판 편집자", "음악가/작곡가"
        ],
    },
    "ENFJ": {
        "summary": "공감 리더십·코칭형. 팀 성장과 문화에 관심.",
        "jobs": [
            "교사/강사", "인사(HR) 매니저", "조직개발(OD)", "커뮤니티 매니저",
            "브랜드 매니저", "PR 매니저", "세일즈 리더", "코치/멘토"
        ],
    },
    "ENFP": {
        "summary": "아이디어·사람 중심. 자율·다양성 선호.",
        "jobs": [
            "크리에이티브 디렉터", "콘텐츠 마케터", "이벤트 플래너", "스타트업 마케터",
            "소셜 미디어 매니저", "광고 기획자", "여행 기획자", "교육 콘텐츠 제작자"
        ],
    },
    "ISTJ": {
        "summary": "체계·신뢰성·정확성 중시. 규정·절차에 강함.",
        "jobs": [
            "회계사", "세무사", "품질관리(QA)", "공무원/행정",
            "데이터 관리자", "법률 사무원", "토목/건축 감리", "규정/컴플라이언스"
        ],
    },
    "ISFJ": {
        "summary": "헌신적·세심·실용. 돌봄과 지원 역할에 강점.",
        "jobs": [
            "간호사/임상병리사", "초중고 교직원", "사서/문헌정보", "고객 지원 스페셜리스트",
            "HR 운영", "보건 행정", "기록관리사", "재무 행정"
        ],
    },
    "ESTJ": {
        "summary": "조직화·실행력·책임감. 목표 달성에 집중.",
        "jobs": [
            "운영 관리자", "생산관리", "프로젝트 매니저", "영업 관리자",
            "군/경 조직관리", "총무/구매", "호텔 매니저", "물류/SCM 매니저"
        ],
    },
    "ESFJ": {
        "summary": "사교적·배려형·조율자. 서비스·협업 강점.",
        "jobs": [
            "학급담임/보조교사", "병원 코디네이터", "고객 성공(CSM)", "이벤트 운영",
            "리테일 매니저", "인사 코디네이터", "식음료 매니저", "사회복지 행정"
        ],
    },
    "ISTP": {
        "summary": "문제해결·손재주·실험적. 즉각적 개선 선호.",
        "jobs": [
            "시스템 엔지니어", "DevOps 엔지니어", "정비/설비 엔지니어", "보안 엔지니어",
            "데이터베이스 관리자", "UX 프로토타이퍼", "게임 툴 개발자", "드론/로봇 기술자"
        ],
    },
    "ISFP": {
        "summary": "감수성·미적감각·유연성. 실무형 크리에이티브.",
        "jobs": [
            "그래픽 디자이너", "패션 디자이너", "산업디자이너", "사진가",
            "실내디자이너", "영상편집자", "플로리스트", "공예가"
        ],
    },
    "ESTP": {
        "summary": "현장형·모험심·설득력. 빠른 의사결정 선호.",
        "jobs": [
            "영업/BD", "단기 트레이더", "응급구조/소방", "스포츠 마케터",
            "현장 엔지니어", "이벤트 세일즈", "부동산 중개", "차량/바이크 테스터"
        ],
    },
    "ESFP": {
        "summary": "에너지·사교성·즉흥성. 사람 중심 활동 선호.",
        "jobs": [
            "배우/공연예술", "방송 리포터", "홍보/PR", "여행 가이드",
            "이벤트 플래너", "항공 승무원", "판매/프로모터", "호텔리어"
        ],
    },
}

# UI
cols = st.columns([1, 2])
with cols[0]:
    mbti = st.selectbox(
        "당신의 MBTI를 선택하세요",
        options=sorted(MBTI_DATA.keys()),
        index=sorted(MBTI_DATA.keys()).index("INTJ") if "INTJ" in MBTI_DATA else 0,
    )
with cols[1]:
    st.text_input("관심 키워드(선택)", placeholder="예: 데이터, 디자인, 교육, 엔지니어 등", key="kw")

# 결과 표시
if mbti:
    data = MBTI_DATA[mbti]
    st.subheader(f"✅ {mbti} 유형 추천 직업")
    st.write(data["summary"])

    # 키워드 필터(선택)
    kw = st.session_state.kw.strip().lower() if st.session_state.kw else ""
    jobs = [j for j in data["jobs"] if kw in j.lower()] if kw else data["jobs"]

    if kw:
        st.caption(f"키워드 '{kw}' 필터 적용")

    for job in jobs:
        st.markdown(f"- {job}")

    if not jobs:
        st.info("해당 키워드와 일치하는 직업이 없어요. 키워드를 바꿔보세요!")

    with st.expander("🔎 활용 팁"):
        st.markdown(
            """
- 각 직업을 검색해 **필요 역량·자격·연봉**을 확인해보세요.  
- 학교/전공·동아리·인턴 등 **다음 단계 액션**을 목록화하면 좋아요.  
- MBTI는 참고용! 흥미/가치/능력 검사를 함께 활용해보세요.
"""
        )

# 추가: 전체 MBTI 한눈에 보기
with st.expander("📚 16가지 MBTI 전체 직업 리스트 보기"):
    for t in sorted(MBTI_DATA.keys()):
        st.markdown(f"**{t}** · {MBTI_DATA[t]['summary']}")
        st.markdown(", ".join(MBTI_DATA[t]["jobs"]))
        st.divider()

# 푸터
st.caption("© 2025 MBTI Career Recommender (for education)")

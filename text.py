import streamlit as st
import pandas as pd

# í•™ìƒë“¤ì´ ìì£¼ ë§ˆì‹œëŠ” ì—ë„ˆì§€ ìŒë£Œ ë°ì´í„° (mg ë‹¨ìœ„ë¡œ ì •ë¦¬)
energy_drinks = {
    "í•«ì‹ìŠ¤ ì˜¤ë¦¬ì§€ë„": {
        "ì¹´í˜ì¸(mg)": 60,
        "íƒ€ìš°ë¦°(mg)": 1000,
        "ì¹¼ë¡œë¦¬(kcal)": 120,
        "íš¨ê³¼": "í”¼ë¡œ íšŒë³µ, ì§‘ì¤‘ë ¥ í–¥ìƒ âš¡",
        "ìš©ëŸ‰": "250ml"
    },
    "í•«ì‹ìŠ¤ ë”í‚¹": {
        "ì¹´í˜ì¸(mg)": 150,
        "íƒ€ìš°ë¦°(mg)": 2000,
        "ì¹¼ë¡œë¦¬(kcal)": 170,
        "íš¨ê³¼": "ê°•ë ¥í•œ ê°ì„± íš¨ê³¼ ğŸš€",
        "ìš©ëŸ‰": "355ml"
    },
    "ëª¬ìŠ¤í„° ì—ë„ˆì§€ ì˜¤ë¦¬ì§€ë„": {
        "ì¹´í˜ì¸(mg)": 160,
        "íƒ€ìš°ë¦°(mg)": 1000,
        "ì¹¼ë¡œë¦¬(kcal)": 210,
        "íš¨ê³¼": "ì§‘ì¤‘ë ¥ ê°•í™”, í”¼ë¡œ ê°ì†Œ ğŸ”¥",
        "ìš©ëŸ‰": "473ml"
    },
    "ëª¬ìŠ¤í„° ìš¸íŠ¸ë¼(ì œë¡œ)": {
        "ì¹´í˜ì¸(mg)": 140,
        "íƒ€ìš°ë¦°(mg)": 1000,
        "ì¹¼ë¡œë¦¬(kcal)": 0,
        "íš¨ê³¼": "ì¹¼ë¡œë¦¬ ë¶€ë‹´ ì—†ì´ ì—ë„ˆì§€ ê³µê¸‰ ğŸ’¨",
        "ìš©ëŸ‰": "355ml"
    }
}

# í•˜ë£¨ ì¹´í˜ì¸ ê¶Œì¥ëŸ‰
DAILY_LIMIT = 400  

# Streamlit UI
st.title("ğŸ¥¤ í•™ìƒë“¤ì´ ìì£¼ ë§ˆì‹œëŠ” ì—ë„ˆì§€ ìŒë£Œ ì„±ë¶„ & íš¨ê³¼")
st.write("ğŸ”¥ í•«ì‹ìŠ¤ì™€ ëª¬ìŠ¤í„°ì˜ ì„±ë¶„ê³¼ íš¨ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!")
st.info("ğŸ’¡ ì„±ì¸ ê¸°ì¤€ í•˜ë£¨ ì¹´í˜ì¸ ê¶Œì¥ëŸ‰ì€ 400mgì…ë‹ˆë‹¤.")

# ìŒë£Œ ì„ íƒ
selected_drink = st.selectbox("ì—ë„ˆì§€ ìŒë£Œë¥¼ ì„ íƒí•˜ì„¸ìš”:", list(energy_drinks.keys()))

# ì„ íƒí•œ ìŒë£Œ ë°ì´í„° í‘œì‹œ
drink_info = energy_drinks[selected_drink]

st.subheader(f"ğŸ“Œ {selected_drink}")
st.write(f"**ìš©ëŸ‰:** {drink_info['ìš©ëŸ‰']}")
st.write(f"**ì¹´í˜ì¸:** {drink_info['ì¹´í˜ì¸(mg)']}mg")
st.write(f"**íƒ€ìš°ë¦°:** {drink_info['íƒ€ìš°ë¦°(mg)']}mg")
st.write(f"**ì¹¼ë¡œë¦¬:** {drink_info['ì¹¼ë¡œë¦¬(kcal)']}kcal")
st.success(f"âœ¨ íš¨ê³¼: {drink_info['íš¨ê³¼']}")

# ì¹´í˜ì¸ ê¶Œì¥ëŸ‰ ëŒ€ë¹„ í¼ì„¼íŠ¸ ê³„ì‚°
percent = (drink_info['ì¹´í˜ì¸(mg)'] / DAILY_LIMIT) * 100

# âœ… st.progress()ëŠ” 0~1 ì‚¬ì´ ê°’ë§Œ í—ˆìš© â†’ percent / 100
st.progress(min(1.0, percent / 100))  
st.write(f"â˜• í•˜ë£¨ ê¶Œì¥ëŸ‰ ëŒ€ë¹„ **{percent:.1f}%** ì„­ì·¨")

# ê²½ê³  ë©”ì‹œì§€
if percent >= 100:
    st.error("ğŸš¨ í•˜ë£¨ ê¶Œì¥ëŸ‰ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤! ì£¼ì˜í•˜ì„¸ìš”.")
elif percent >= 70:
    st.warning("âš ï¸ ê¶Œì¥ëŸ‰ì˜ 70% ì´ìƒ ì„­ì·¨í–ˆìŠµë‹ˆë‹¤. ì¡°ì‹¬í•˜ì„¸ìš”!")

# í…Œì´ë¸”ë¡œ ì „ì²´ ìŒë£Œ ë³´ê¸°
if st.checkbox("ğŸ“Š ëª¨ë“  ìŒë£Œ ì„±ë¶„ ë¹„êµí•˜ê¸°"):
    df = pd.DataFrame(energy_drinks).T
    st.dataframe(df)
